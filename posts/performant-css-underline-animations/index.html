<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-jsx-1afdc204e3b420b1219e.js" as="script"/><link rel="preload" href="/component---src-templates-blog-post-jsx-ed1ba382c335bd94e1a2.js" as="script"/><link rel="preload" href="/path---posts-performant-css-underline-animations-70cbfeeffa4cf0e0ce8d.js" as="script"/><link rel="preload" href="/app-08bdb134e9c363131c92.js" as="script"/><link rel="preload" href="/commons-65a43973198842ab1a28.js" as="script"/><title data-react-helmet="true">Josiah&#x27;s Blog - Performant CSS Underline animations</title><meta data-react-helmet="true" name="google-site-verification" content="iTqQGhz5A11iZYYP6fr9lS1lpnduASXddf5sr9tUN78"/><style id="gatsby-inlined-css">@import url(https://fonts.googleapis.com/css?family=Raleway:400,700);.navbar{position:fixed;top:0;left:0;height:44px;width:100vh;display:flex;align-items:center;background-color:#424242;transform-origin:top right;transform:translate(-100%) rotate(-90deg);transition-duration:.5s}.navbar a{margin:0 15px;color:#ececec}.navbar a.selected{color:#fff;font-weight:800}.navbar a+.sublinks{position:relative;float:right;width:0;height:0;transform:scaleX(0)}.navbar .selected+.sublinks{width:auto;height:auto;transform:scaleX(1)}.navbar .selected+.sublinks:before{content:"";position:absolute;width:10px;height:100%;left:-3px;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMC44NDggOC41MyI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogbm9uZTsKICAgICAgICBzdHJva2U6ICNmZmY7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgPC9kZWZzPgogIDxnIGlkPSJHcm91cF8xIiBkYXRhLW5hbWU9Ikdyb3VwIDEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zNS41NzYgLTMwMy43MzUpIj4KICAgIDxsaW5lIGlkPSJMaW5lXzIiIGRhdGEtbmFtZT0iTGluZSAyIiBjbGFzcz0iY2xzLTEiIHkxPSI4IiB4Mj0iNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzYgMzA0KSIvPgogICAgPGxpbmUgaWQ9IkxpbmVfMyIgZGF0YS1uYW1lPSJMaW5lIDMiIGNsYXNzPSJjbHMtMSIgeDE9IjUiIHkxPSI4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MSAzMDQpIi8+CiAgPC9nPgo8L3N2Zz4K);background-repeat:no-repeat;background-position:50%;transform:rotate(90deg)}.navbar .selected+.sublinks>a{margin:.5em}.navbar .selected+.sublinks>a:first-child{margin-left:15px}.navbar .selected+.sublinks>a:last-child{margin-right:15px}.navbar .selected+.sublinks:after{content:"";position:absolute;width:1px;height:100%;background-color:#fff}body{margin-left:44px}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}@font-face{font-family:FiraCode;src:url(/static/FiraCode.4d1f86fc.woff) format("woff");font-weight:400;font-style:normal}html{line-height:1.4em;font-size:16px}@media screen and (min-width:360px){html{font-size:calc(16px + 8 * ((100vw - 360px) / 840))}}@media screen and (min-width:1200px){html{font-size:24px}}body{margin:5px;margin-left:49px;font-size:62.5%;font-family:Raleway}a{position:relative;text-decoration:none;font-weight:600}@media (hover:hover){.MainPage a:not(.no-ul):after{content:"";position:absolute;left:50%;bottom:0;height:2px;width:100%;background:linear-gradient(90deg,rgba(64,64,64,0),rgba(64,64,64,.9),#404040,rgba(64,64,64,.9),rgba(64,64,64,0));opacity:0;transform:translateX(-50%) scaleX(0);transition:.2s cubic-bezier(.4,0,.2,1)}.MainPage a:not(.no-ul):hover:after{opacity:1;transform:translateX(-50%) scaleX(1)}a:not(.no-ul).left-underline:after{left:0;background:linear-gradient(90deg,#404040,rgba(64,64,64,.9),rgba(64,64,64,0));transform:scaleX(0);transform-origin:left;transition-duration:.3s}a:not(.no-ul).left-underline:hover:after{transform:scaleX(1)}}a,div,h1,h2,h3,h4,h5,h6,p{font-family:Raleway}h1{display:block;font-weight:600;line-height:100%;font-size:1.3rem;color:#464646}a,div,p{font-size:.8rem;color:#404040}.header-container{margin:25px 0 15px;text-align:center}.header-blog-logo>img{max-width:100%}.nav-container{font-family:Raleway;display:flex;font-size:70%;text-align:center;margin:.5rem auto;max-width:768px}.nav-btn{color:#2e2e2e;font-size:1.2rem;flex-grow:1}.blog-post-preview{margin-bottom:2rem}.blog-post-preview-title,.blog-post-title{display:block;font-weight:600;line-height:100%;font-size:1.2rem;color:#464646}.blog-post-date,.blog-post-preview-date{font-size:.6rem;color:#404040;margin-top:-10px}.blog-post-tags{float:right;font-weight:500}.blog-post-content,.blog-post-preview-excerpt{font-size:.8rem;color:#404040;margin-top:-5px;font-weight:400}.blog-post-content{margin-top:-.5rem}.post-tags{position:fixed;left:0;bottom:0;padding:10px;background-color:#fff;border:2px solid #212121;border-width:2px 2px 2px 0;transform:translate(-100%);transition-duration:.3s;z-index:10}.post-tags.open{transform:translate(0)}.post-tags>ul{list-style-type:none;margin:0;padding-left:0}.post-tags>ul>a{display:block;padding:5px}.post-tags .handle{position:absolute;bottom:-2px;right:-2px;margin-left:10px;padding:5px;background-color:#fff;border:2px solid #212121;border-width:2px 2px 2px 0;transform:translate(100%)}.gatsby-highlight{background-color:#ececec;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-]{background-color:transparent;margin:0;padding:0;overflow:initial;float:left;min-width:100%}.gatsby-highlight-code-line{background-color:#e2e2e2;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #a0a0a0}.token.operator{background:initial!important}code{font-family:FiraCode;background-color:#ececec;border-radius:5px;padding:.1em .2em;color:#404040}.modern-header{text-align:center}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="1686752665"><!-- react-empty: 2 --><div data-reactid="3"><div class="header-container" data-reactid="4"><a class="header-blog-logo" href="/" data-reactid="5"><img src="/static/header logo.81858cfe.svg" alt="Header" data-reactid="6"/></a></div></div><nav class="navbar" data-reactid="7"><div class="navgroup" data-reactid="8"><a class="primary-link selected" aria-current="page" href="/" data-reactid="9">Home</a><div class="sublinks" data-reactid="10"><a href="/tags" data-reactid="11">Tags</a></div></div><div class="navgroup" data-reactid="12"><a class="primary-link" href="/about" data-reactid="13">About</a><div class="sublinks" data-reactid="14"><a href="/about/person" data-reactid="15">As a person</a><a href="/about/developer" data-reactid="16">As a developer</a></div></div><a href="/projects" data-reactid="17">Projects</a><a href="/contact" data-reactid="18">Contact</a></nav><div style="margin:0 auto;max-width:768px;padding:0px 1.0875rem 1.45rem;padding-top:0;" class="MainPage" data-reactid="19"><div class="blog-post-container" data-reactid="20"><!-- react-empty: 21 --><div class="blog-post" data-reactid="22"><h1 class="blog-post-title" data-reactid="23">Performant CSS Underline animations</h1><h2 class="blog-post-date" data-reactid="24"><!-- react-text: 25 -->July 15, 2018<!-- /react-text --><span class="blog-post-tags" data-reactid="26">Animation, CSS, Performance, Tutorial</span></h2><div class="blog-post-content" data-reactid="27"><p>With CSS, there's plenty of ways to do an underline. Borders, box shadows, pseudo elements... The list goes on and on. But is any one method better than another? Let's take a look at a few methods of doing a simple animated underline, then we'll dig a bit deeper into the differences between them.</p>
<h3>Animating the border.</h3>
<p>The first method involves animating the border of an element. </p>
<iframe height='265' scrolling='no' title='Performant underline animation__border-animation' src='//codepen.io/FracturedLoop/embed/RBrxJm/?height=265&theme-id=dark&default-tab=css,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/FracturedLoop/pen/RBrxJm/'>Performant underline animation__border-animation</a> by Josiah Nunemaker (<a href='https://codepen.io/FracturedLoop'>@FracturedLoop</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<p>It's probably the simplest method, but it comes with a few downfalls. Probably first on the problem list is that fact that it modifies the element's box model, which causes the entire element to repaint. In most cases, this is probably not an issue, but if you had a large element using this, things could get a little laggy. The second issue with this method is probably more important than the first. As you probably noticed, this animation isn't exactly the smoothest animation. This is because most browsers round to the nearest pixel when rendering things to increase performance. As a result, the animation jumps when it's size is animating. Finally, because we are animating the element's border, this method won't work if you are using the border already (well, it <em>would</em> work, but it would probably look horrible).</p>
<h3>A pseudo element</h3>
<p>This method has a similar result to the first method, but has a slight increase in performance.</p>
<iframe height='265' scrolling='no' title='Performant underline animation__pseudo-element' src='//codepen.io/FracturedLoop/embed/ZjQvPv/?height=265&theme-id=dark&default-tab=css,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/FracturedLoop/pen/ZjQvPv/'>Performant underline animation__pseudo-element</a> by Josiah Nunemaker (<a href='https://codepen.io/FracturedLoop'>@FracturedLoop</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<p>This method is relatively straightforward. Instead of using the elements border as an underline, this method uses a pseudo element. (If you don't know what pseudo elements are, MDN covers it pretty well <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements">here</a>.) There's a few advantages to using this method. Firstly, you can use it on an element that has an existing border. What's probably more important, however, is the fact that you are using CSS transforms, which greatly speeds up the animation. Also, the underline is a completely seperate element, so you could style it however you want (Rounded corners, anyone?), and also enables the use of relative sizes for the underline, like percentages.</p>
<p>As you may have noticed, though, there's still the issue with rounding and glitchy animation in some cases, but overall, performance is a lot better. Another potential issue is that it requires a pseudo element, so you can't be using both :before and :after pseudo elements. Probably the largest issue (or potentially greatest benefit) is that it only places one underline under the entire element, even if there are multiple lines. With the border method, there will be an underline on every line.</p>
<h3>A smoother solution</h3>
<p>So what can we do about the glitchy animation? Well, there's a relatively simple solution. </p>
<iframe height='265' scrolling='no' title='Performant underline animation__scaled-pseudo-element' src='//codepen.io/FracturedLoop/embed/EpPQYe/?height=265&theme-id=dark&default-tab=css,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'>See the Pen <a href='https://codepen.io/FracturedLoop/pen/EpPQYe/'>Performant underline animation__scaled-pseudo-element</a> by Josiah Nunemaker (<a href='https://codepen.io/FracturedLoop'>@FracturedLoop</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>
<p>Boom. That's a lot smoother isn't it? By sizing up the element up, then using CSS transforms to shrink it back down, the browser will be rendering the whole-number values, but shrink the entire element down. This results in smoother animation because it is rendering the interpolated values of the animation. The difference between the animtaions becomes really obvious when you <a href="https://developers.google.com/web/tools/chrome-devtools/inspect-styles/animations#inspect">slow down the animation</a> using devtools. <a href="https://codepen.io/FracturedLoop/full/pZgdGv/">Here's</a> a link if you want to compare the three methods. It also has the same benefits as the other method using the pseudo-element.</p>
<p>So are there any cons? Sadly, yes. This suffers the same issues as the previous method, with the exception of the jittery animation. But for most instances the benefits greatly outweigh the cons, as you rarely deal with multiple pseudo elements anyway.</p>
<p>This is only a few methods of animating an underline, and there's many more methods out there. For the most part though, one of these methods will work well, and greatly simplify things compared to more complex methods.</p></div></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-08bdb134e9c363131c92.js","203586849492694":"component---src-templates-blog-post-jsx-ed1ba382c335bd94e1a2.js","183400410456155":"component---src-templates-tag-jsx-03a203fc642d1f71f554.js","183328146348521":"component---src-pages-404-jsx-c5c852fc7d2d849261f7.js","194617171095593":"component---src-pages-about-developer-jsx-3ed4e7762c15f65f6f0f.js","10275909047342":"component---src-pages-about-person-jsx-db94851fcc1e609df607.js","58411574672382":"component---src-pages-contact-jsx-3ef04917cfe3fdde4719.js","213534597649335":"component---src-pages-index-jsx-90e058c91eb83d664e67.js","19843951674672":"component---src-pages-projects-jsx-f39d6663e50822f6b724.js","36530248567819":"component---src-pages-tags-jsx-f1f0c1cdc4580bd34dc2.js","60335399758886":"path----557518bd178906f8d58a.js","219609313005887":"path---posts-fixing-mobile-hover-effects-6dfc602bd2612e3b081b.js","210826409636803":"path---posts-performant-css-underline-animations-70cbfeeffa4cf0e0ce8d.js","149225670731958":"path---posts-graphql-why-2cb4807c0c4b3fe8af9a.js","115564323070195":"path---posts-routing-traffic-per-domain-peplink-router-81344296bbcaa205db2f.js","140665929938215":"path---posts-so-you-want-to-learn-programming-df5d88bc4c6fb3b5780c.js","183489117001233":"path---posts-if-you-are-worrying-about-unknows-are-you-really-in-love-with-god-9e5dca2488bafce8d76f.js","205717203024296":"path---posts-managing-dotfiles-and-zsh-with-dotbot-and-antigen-755c374092efde706e9e.js","219233629342404":"path---posts-best-free-download-manager-for-mac-e10a65c6ea103b93d0b3.js","88145336971341":"path---tags-optimization-842be8e3a1c5f39d66bd.js","209063065961547":"path---tags-css-c1165b21986ffe4d1c13.js","248058163014661":"path---tags-sass-175a059489d28a29e63c.js","17270373950093":"path---tags-mixin-db8cf546eecb6f2cc676.js","208266192613574":"path---tags-tutorial-b2277fe137bcdc7726e9.js","85273878220361":"path---tags-performance-8a15824f6bdb54173fd0.js","30238331763529":"path---tags-animation-4145287e48f20f6a7ed4.js","50597499775658":"path---tags-graphql-99b75ae26c0523db4f1f.js","64912151000576":"path---tags-networking-5b94762dbf8276ee15f1.js","40430315145424":"path---tags-learning-df3296cd5afaa52dc94f.js","20956934260092":"path---tags-programming-ec74056c6a523f547e69.js","230878307419645":"path---tags-life-aceeec349850a5827be6.js","44151875297707":"path---tags-config-cf9bbc6c6d5b2d9e6ec5.js","274698813674428":"path---tags-computer-setup-770ae529529142bf1f80.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","37224193701624":"path---about-developer-a0e39f21c11f6a62c5ab.js","42525992649016":"path---about-person-a0e39f21c11f6a62c5ab.js","184662623972074":"path---contact-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-daf980b78561b8ea9d1c.js","97786326051841":"path---projects-a0e39f21c11f6a62c5ab.js","55702396619907":"path---tags-34f912598c57058b4308.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","79611799117203":"component---src-layouts-index-jsx-1afdc204e3b420b1219e.js"}/*]]>*/</script><script>
            
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-96915741-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-96915741-1', 'auto');
      ga('set', 'anonymizeIp', 1);}
      </script><script>/*<![CDATA[*/["/commons-65a43973198842ab1a28.js","/app-08bdb134e9c363131c92.js","/path---posts-performant-css-underline-animations-70cbfeeffa4cf0e0ce8d.js","/component---src-templates-blog-post-jsx-ed1ba382c335bd94e1a2.js","/component---src-layouts-index-jsx-1afdc204e3b420b1219e.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>